---
title: "iOS数字千位分割，保留小数位，末尾去零"
date: 2014-11-01 10:30:00
tag: [VIM]
blog: true
layout: post

---

函数如下：

```
// 千位符函数  
- (NSString *)separatedStrWithStr:(NSString *)string  
{  
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc]init];  
    double value = [string doubleValue];  
    [formatter setNumberStyle:NSNumberFormatterDecimalStyle];  
    return [formatter stringFromNumber:@(value)];  
}  
  
- (NSString *)separatedFloatStrWithStr:(NSString *)string  
{  
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc]init];  
    double value = [string doubleValue];  
    [formatter setPositiveFormat:@"###,##0.00;"];  
    return [formatter stringFromNumber:@(value)];  
}  
// 删除末尾0  
- (NSString *)deleteZeroWithString:(NSString *)str  
{  
    NSMutableString *string = [[NSMutableString alloc]initWithFormat:@"%@",str];  
    NSArray *array_1 = [string componentsSeparatedByString:@"."];  
    if (array_1.count == 2) {  
        for (int i =0; i <1000; i++)  
        {  
            NSLog(@"%ld",string.length);  
            NSLog(@"%@",[string substringWithRange:NSMakeRange(string.length -1, 1)]);  
            if ([[string substringWithRange:NSMakeRange(string.length -1, 1)] isEqualToString:@"0"])  
            {  
                [string deleteCharactersInRange:NSMakeRange(string.length -1 , 1)];  
            }  
            else if([[string substringWithRange:NSMakeRange(string.length -1, 1)] isEqualToString:@"."])  
            {  
                [string deleteCharactersInRange:NSMakeRange(string.length -1, 1)];  
                i= 10000;  
            }  
            else  
            {  
                i= 10000;  
            }  
        }  
    }  
    NSArray *array_2 = [string componentsSeparatedByString:@"."];  
    if (array_2.count == 2) {  
        NSString *intStr = [array_2 objectAtIndex:0];  
        intStr = [self separatedStrWithStr:intStr];  
        NSString *dotStr = [array_2 objectAtIndex:1];  
        string = [[NSMutableString alloc]initWithFormat:@"%@.%@",intStr,dotStr];  
    }else{  
        string = [[NSMutableString alloc]initWithFormat:@"%@",[self separatedStrWithStr:string]];  
    }  
    return (NSString *)string;  
}  
```

